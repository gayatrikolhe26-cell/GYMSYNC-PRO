<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>GYMSYNC PRO</title>
<link rel="stylesheet" href="global.css">

<style>
body{
display:flex;
justify-content:center;
align-items:center;
height:100vh;
font-family:sans-serif;
color:white;
}

.card{
background:rgba(0,0,0,0.75);
backdrop-filter:blur(18px);
padding:40px;
border-radius:20px;
width:380px;
text-align:center;
box-shadow:0 0 40px rgba(0,255,255,0.15);
}

.tabs{
display:flex;
justify-content:space-around;
margin-bottom:25px;
cursor:pointer;
}

.tab{
padding:10px;
border-bottom:2px solid transparent;
}

.active{
border-bottom:2px solid #22d3ee;
}

input,select{
width:100%;
padding:12px;
margin:8px 0;
border:none;
border-bottom:1px solid #444;
background:transparent;
color:white;
outline:none;
}

select option{
background:#020617;
color:white;
}

button{
margin-top:18px;
padding:12px;
width:100%;
border:none;
border-radius:25px;
background:linear-gradient(90deg,#22d3ee,#a855f7);
color:white;
font-weight:bold;
cursor:pointer;
}

.small{
font-size:12px;
text-align:right;
color:#a855f7;
margin-top:5px;
}

.hidden{display:none;}
</style>
</head>

<body>

<div class="card">

<h2 style="color:#22d3ee;">GYMSYNC PRO</h2>

<div class="tabs">
<div class="tab active" onclick="showLogin()" id="loginTab">Login</div>
<div class="tab" onclick="showSignup()" id="signupTab">Sign Up</div>
</div>

<!-- LOGIN -->
<div id="loginForm">

<select id="role">
<option value="admin">Admin</option>
<option value="trainer">Trainer</option>
<option value="member">Member</option>
</select>

<input id="loginEmail" placeholder="Email">
<input id="loginPass" type="password" placeholder="Password">

<div class="small">Forgot Password?</div>

<button onclick="login()">Login</button>

</div>

<!-- REGISTER -->
<div id="signupForm" class="hidden">

<input id="name" placeholder="Full Name">
<input id="email" placeholder="Email">
<input id="phone" placeholder="Phone">
<input id="password" type="password" placeholder="Password">

<input id="age" placeholder="Age">
<select id="gender">
<option value="">Gender</option>
<option>Male</option>
<option>Female</option>
</select>

<input id="height" placeholder="Height (cm)">
<input id="weight" placeholder="Weight (kg)">

<select id="plan">
<option value="1">1 Month - ₹2000</option>
<option value="3">3 Months - ₹5000</option>
<option value="6">6 Months - ₹9000</option>
</select>

<button onclick="register()">Create Account</button>

</div>

<p id="msg" style="margin-top:15px;"></p>

</div>

<script>

function showLogin(){
loginForm.classList.remove("hidden");
signupForm.classList.add("hidden");
loginTab.classList.add("active");
signupTab.classList.remove("active");
}

function showSignup(){
signupForm.classList.remove("hidden");
loginForm.classList.add("hidden");
signupTab.classList.add("active");
loginTab.classList.remove("active");
}

/* LOGIN */
function login(){

let role = document.getElementById("role").value;
let email = document.getElementById("loginEmail").value;
let password = document.getElementById("loginPass").value;

fetch("../backend/universal_login.php",{
method:"POST",
headers:{"Content-Type":"application/x-www-form-urlencoded"},
body:"role="+role+"&email="+email+"&password="+password
})
.then(res=>res.text())
.then(data => {

data = data.trim();

if(data === "admin"){
    window.location.href = "dashboard.html";
}
else if(data === "trainer"){
    window.location.href = "trainer_dashboard.html";
}
else if(data === "member"){
    window.location.href = "member_dashboard.html";
}
else{
    alert("Invalid Login");
}

});
}
/* REGISTER MEMBER */
function register(){

let nameVal = document.getElementById("name").value;
let emailVal = document.getElementById("email").value;
let phoneVal = document.getElementById("phone").value;
let passwordVal = document.getElementById("password").value;
let ageVal = document.getElementById("age").value;
let genderVal = document.getElementById("gender").value;
let heightVal = document.getElementById("height").value;
let weightVal = document.getElementById("weight").value;
let planVal = document.getElementById("plan").value;

fetch("../backend/register_member.php",{
method:"POST",
headers:{"Content-Type":"application/x-www-form-urlencoded"},
body:
"name="+encodeURIComponent(nameVal)+
"&email="+encodeURIComponent(emailVal)+
"&phone="+encodeURIComponent(phoneVal)+
"&password="+encodeURIComponent(passwordVal)+
"&age="+encodeURIComponent(ageVal)+
"&gender="+encodeURIComponent(genderVal)+
"&height="+encodeURIComponent(heightVal)+
"&weight="+encodeURIComponent(weightVal)+
"&plan="+encodeURIComponent(planVal)
})
.then(res=>res.text())
.then(data=>{
msg.innerHTML=data;
showLogin();
});
}

</script>
</body>
</html>